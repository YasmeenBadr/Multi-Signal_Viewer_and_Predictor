<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Doppler Viewer</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <style>
    body { background:#000; color:#e0e0e0; text-align:center; font-family:"Times New Roman"; }
    h1 { color:#00eaff; }
    .doppler-btn { background-color: #00eaff; border: none; color: black; font-weight: bold; }
    .doppler-btn:hover { background-color: #00c0cc; color: white; }
    .back-btn { background-color: white; border: none; color: black; font-weight: bold; }
    .back-btn:hover { background-color: #e0e0e0; color: black; }
    .form-control { max-width: 300px; margin: 10px auto; }
    .hint { color: #cfd8dc; font-size: 0.9rem; margin-top: 6px; }
    #detect-form { display: none; margin-top: 20px; }
  </style>
</head>
<body>
  <div class="container mt-5">
    <h1>Doppler Viewer</h1>
    <p>Choose an action below:</p>

    <!-- üîπ ÿßŸÑÿ¨ÿ≤ÿ° ÿßŸÑÿ£ŸàŸÑ: Detect -->
    <button id="detect-btn" class="btn doppler-btn m-2">Detect</button>

    <!-- ŸÅŸàÿ±ŸÖ ÿßÿÆÿ™Ÿäÿßÿ± ŸÖŸÑŸÅ ÿßŸÑÿµŸàÿ™ -->
    <form id="detect-form" method="POST" action="/doppler/upload" enctype="multipart/form-data">
      <p class="hint mt-2">Upload a .wav file to estimate the speed using the trained model.</p>
      <input type="file" name="audio_file" accept=".wav" class="form-control" required>
      <button type="submit" class="btn doppler-btn mt-2">Upload & Detect</button>
    </form>

    <hr style="border-color:#00eaff; width:60%; margin:40px auto;">

    <!-- üîπ ÿßŸÑÿ¨ÿ≤ÿ° ÿßŸÑÿ´ÿßŸÜŸä: Generate -->
    <h3 style="color:#00eaff;">Generate Doppler Sound</h3>
    <form method="POST" action="{{ url_for('doppler.generate') }}" class="mt-3">
      <input type="number" step="0.1" min="0" name="velocity" class="form-control" placeholder="Enter velocity (m/s) ‚Äî e.g. 0, 10, 30" required>
      <input type="number" step="1" min="20" name="frequency" class="form-control" placeholder="Enter frequency (Hz) ‚Äî e.g. 100 or 150" required>
      <input type="hidden" name="distance" value="5">
      <input type="hidden" name="duration" value="6">
      <button type="submit" class="btn doppler-btn mt-2">Generate</button>
    </form>

    <div class="hint mt-3">
      Recommended tests: velocity = 0, 10, 30 (m/s). frequency = 150‚Äì400 (Hz). distance = 5 m (default).
    </div>

    <br>
    <a href="/" class="btn back-btn mt-3">Back to Home</a>
  </div>

  <script>
    // ÿ•ÿ∏Ÿáÿßÿ±/ÿ•ÿÆŸÅÿßÿ° ÿßŸÑŸÅŸàÿ±ŸÖ ÿπŸÜÿØ ÿßŸÑÿ∂ÿ∫ÿ∑ ÿπŸÑŸâ ÿ≤ÿ± Detect
    document.getElementById("detect-btn").addEventListener("click", function() {
      const form = document.getElementById("detect-form");
      form.style.display = form.style.display === "none" ? "block" : "none";
    });
  </script>
</body>
</html>